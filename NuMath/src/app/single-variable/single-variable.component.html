<h1 style="text-align: center;">Single Variable Equations</h1>
<div style=" margin-left: 3%; margin-right: 3%;">
    <div id="scrolltable" style="width: 28%; float: left;">
        <form>
            <div class="form-container">
                <mat-form-field style="margin-bottom: 6px;">
                    <mat-label>Method</mat-label>
                    <mat-select matNativeControl [formControl]="method_control" [(value)]=method>
                        <mat-option *ngFor="let method of methods" [value]="method">
                            {{method}}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="method_control.invalid">{{getErrorMessage("method")}}</mat-error>
                </mat-form-field>

                <mat-form-field style="margin-bottom: 6px;">
                    <input id="function" matInput placeholder="Function" [formControl]="f_control" required>
                    <mat-error *ngIf="f_control.invalid">{{getErrorMessage("f")}}</mat-error>
                </mat-form-field>

                <!-- INCREMENTAL SEARCH -->
                <div *ngIf="method=='Incremental Search'" class="form-container">
                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="x0" matInput type="number" placeholder="X0" [formControl]="x0_control" required>
                        <mat-error *ngIf="x0_control.invalid">{{getErrorMessage("x0")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="delta" matInput type="number" placeholder="Delta" [formControl]="delta_control"
                            required>
                        <mat-error *ngIf="delta_control.invalid">{{getErrorMessage("delta")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="nIter" matInput type="number" placeholder="Number of Iterations"
                            [formControl]="nIter_control" required>
                        <mat-error *ngIf="nIter_control.invalid">{{getErrorMessage("nIter")}}</mat-error>
                    </mat-form-field>
                </div>
                <!-- INCREMENTAL SEARCH -->

                <!-- BISECTION -->
                <div *ngIf="method=='Bisection'" class="form-container">
                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="xi" matInput type="number" placeholder="Xi" [formControl]="xi_control" required>
                        <mat-error *ngIf="xi_control.invalid">{{getErrorMessage("xi")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="xu" matInput type="number" placeholder="Xu" [formControl]="xu_control" required>
                        <mat-error *ngIf="xu_control.invalid">{{getErrorMessage("xu")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="nIter" matInput type="number" placeholder="Number of Iterations"
                            [formControl]="nIter_control" required>
                        <mat-error *ngIf="nIter_control.invalid">{{getErrorMessage("nIter")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="tol" matInput type="number" placeholder="Tolerance" [formControl]="tol_control"
                            required>
                        <mat-error *ngIf="tol_control.invalid">{{getErrorMessage("tol")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <mat-label>Error Type</mat-label>
                        <mat-select matNativeControl [formControl]="error_control" required [(value)]=error>
                            <mat-option *ngFor="let error of errorTypes" [value]="error">
                                {{error}}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="error_control.invalid">{{getErrorMessage("error")}}</mat-error>
                    </mat-form-field>
                </div>
                <!-- BISECTION -->

                <!-- FALSE POSITION -->
                <div *ngIf="method=='False Position'" class="form-container">
                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="xi" matInput type="number" placeholder="Xi" [formControl]="xi_control" required>
                        <mat-error *ngIf="xi_control.invalid">{{getErrorMessage("xi")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="xu" matInput type="number" placeholder="Xu" [formControl]="xu_control" required>
                        <mat-error *ngIf="xu_control.invalid">{{getErrorMessage("xu")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="nIter" matInput type="number" placeholder="Number of Iterations"
                            [formControl]="nIter_control" required>
                        <mat-error *ngIf="nIter_control.invalid">{{getErrorMessage("nIter")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="tol" matInput type="number" placeholder="Tolerance" [formControl]="tol_control"
                            required>
                        <mat-error *ngIf="tol_control.invalid">{{getErrorMessage("tol")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <mat-label>Error Type</mat-label>
                        <mat-select matNativeControl [formControl]="error_control" required [(value)]=error>
                            <mat-option *ngFor="let error of errorTypes" [value]="error">
                                {{error}}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="error_control.invalid">{{getErrorMessage("error")}}</mat-error>
                    </mat-form-field>
                </div>
                <!-- FALSE POSITION -->

                <!-- FIXED POINT-->
                <div *ngIf="method=='Fixed Point'" class="form-container">
                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="g" matInput placeholder="g Function" [formControl]="g_control" required>
                        <mat-error *ngIf="g_control.invalid">{{getErrorMessage("g")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="xa" matInput type="number" placeholder="Xa" [formControl]="xa_control" required>
                        <mat-error *ngIf="xa_control.invalid">{{getErrorMessage("xa")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="nIter" matInput type="number" placeholder="Number of Iterations"
                            [formControl]="nIter_control" required>
                        <mat-error *ngIf="nIter_control.invalid">{{getErrorMessage("nIter")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="tol" matInput type="number" placeholder="Tolerance" [formControl]="tol_control"
                            required>
                        <mat-error *ngIf="tol_control.invalid">{{getErrorMessage("tol")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <mat-label>Error Type</mat-label>
                        <mat-select matNativeControl [formControl]="error_control" required [(value)]=error>
                            <mat-option *ngFor="let error of errorTypes" [value]="error">
                                {{error}}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="error_control.invalid">{{getErrorMessage("error")}}</mat-error>
                    </mat-form-field>
                </div>
                <!-- FIXED POINT-->

                <!-- NEWTON-->
                <div *ngIf="method=='Newton'" class="form-container">
                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="dFunction" matInput placeholder="Derivative Function" [formControl]="d_control"
                            required>
                        <mat-error *ngIf="d_control.invalid">{{getErrorMessage("d")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="x0" matInput type="number" placeholder="X0" [formControl]="x0_control" required>
                        <mat-error *ngIf="x0_control.invalid">{{getErrorMessage("x0")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="nIter" matInput type="number" placeholder="Number of Iterations"
                            [formControl]="nIter_control" required>
                        <mat-error *ngIf="nIter_control.invalid">{{getErrorMessage("nIter")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="tol" matInput type="number" placeholder="Tolerance" [formControl]="tol_control"
                            required>
                        <mat-error *ngIf="tol_control.invalid">{{getErrorMessage("tol")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <mat-label>Error Type</mat-label>
                        <mat-select matNativeControl [formControl]="error_control" required [(value)]=error>
                            <mat-option *ngFor="let error of errorTypes" [value]="error">
                                {{error}}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="error_control.invalid">{{getErrorMessage("error")}}</mat-error>
                    </mat-form-field>
                </div>
                <!-- NEWTON-->

                <!-- SECANT -->
                <div *ngIf="method=='Secant'" class="form-container">
                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="x0" type="number" matInput placeholder="X0" [formControl]="x0_control" required>
                        <mat-error *ngIf="x0_control.invalid">{{getErrorMessage("x0")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="x1" matInput type="number" placeholder="X1" [formControl]="x1_control" required>
                        <mat-error *ngIf="x1_control.invalid">{{getErrorMessage("x1")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="nIter" matInput type="number" placeholder="Number of Iterations"
                            [formControl]="nIter_control" required>
                        <mat-error *ngIf="nIter_control.invalid">{{getErrorMessage("nIter")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="tol" matInput type="number" placeholder="Tolerance" [formControl]="tol_control"
                            required>
                        <mat-error *ngIf="tol_control.invalid">{{getErrorMessage("tol")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <mat-label>Error Type</mat-label>
                        <mat-select matNativeControl [formControl]="error_control" required [(value)]=error>
                            <mat-option *ngFor="let error of errorTypes" [value]="error">
                                {{error}}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="error_control.invalid">{{getErrorMessage("error")}}</mat-error>
                    </mat-form-field>
                </div>
                <!-- SECANT -->

                <!-- MULTIPLE ROOTS -->
                <div *ngIf="method=='Multiple Roots'" class="form-container">
                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="d" matInput placeholder="Derivative Function" [formControl]="d_control" required>
                        <mat-error *ngIf="d_control.invalid">{{getErrorMessage("d")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="d2" matInput placeholder="Second Derivative Function" [formControl]="d2_control"
                            required>
                        <mat-error *ngIf="d2_control.invalid">{{getErrorMessage("d2")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="x0" type="number" matInput placeholder="X0" [formControl]="x0_control" required>
                        <mat-error *ngIf="x0_control.invalid">{{getErrorMessage("x0")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="nIter" matInput type="number" placeholder="Number of Iterations"
                            [formControl]="nIter_control" required>
                        <mat-error *ngIf="nIter_control.invalid">{{getErrorMessage("nIter")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <input id="tol" matInput type="number" placeholder="Tolerance" [formControl]="tol_control"
                            required>
                        <mat-error *ngIf="tol_control.invalid">{{getErrorMessage("tol")}}</mat-error>
                    </mat-form-field>

                    <mat-form-field style="margin-bottom: 6px;">
                        <mat-label>Error Type</mat-label>
                        <mat-select matNativeControl [formControl]="error_control" required [(value)]=error>
                            <mat-option *ngFor="let error of errorTypes" [value]="error">
                                {{error}}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="error_control.invalid">{{getErrorMessage("error")}}</mat-error>
                    </mat-form-field>

                </div>
                <!-- MULTIPLE ROOTS -->
                <br>
                <button mat-raised-button color="primary" *ngIf="method!=''" (click)="plot();">Calculate</button>
                <br>
            </div>
        </form>
    </div>
    <div id="scrolltable" style="width: 68%; float: right; display: flex; flex-direction:row;">
        <div style="float: left;">
            <canvas id="myCanvas" width="1000px" height="600px"></canvas>
            <br>
            <p *ngIf="method=='Incremental Search' && firstNum!=secondNum && show">There is a root between {{firstNum}}
                and {{secondNum}}</p>
            <p *ngIf="method=='Incremental Search' && firstNum==secondNum && show">The root is {{firstNum}}</p>
            <p *ngIf="method=='Incremental Search' && errorFound">Error: Could not find anything!</p>

            <div *ngIf="method=='Incremental Search' && show">
                <table class="table">
                    <tr>
                        <td>n</td>
                        <td>x</td>
                        <td>f(x)</td>
                    </tr>
                    <tr *ngFor="let row of table">
                        <td *ngFor="let val of row">{{val}}</td>
                    </tr>
                </table>
            </div>


            <p *ngIf="method=='Bisection' && show">The root is {{result}}</p>
            <p *ngIf="method=='Bisection' && errorFound">Error: {{result}}</p>

            <div *ngIf="method=='Bisection' && show">
                <table class="table">
                    <tr>
                        <td>n</td>
                        <td>xm</td>
                        <td>f(xm)</td>
                        <td>Error</td>
                    </tr>
                    <tr *ngFor="let row of table">
                        <td *ngFor="let val of row">{{val}}</td>
                    </tr>
                </table>
            </div>

            <p *ngIf="method=='False Position' && show">The root is {{result}}</p>
            <p *ngIf="method=='False Position' && errorFound">Error: {{result}}</p>

            <div *ngIf="method=='False Position' && show">
                <table class="table">
                    <tr>
                        <td>n</td>
                        <td>xm</td>
                        <td>f(xm)</td>
                        <td>Error</td>
                    </tr>
                    <tr *ngFor="let row of table">
                        <td *ngFor="let val of row">{{val}}</td>
                    </tr>
                </table>
            </div>

            <p *ngIf="method=='Fixed Point' && showF">
                <mat-icon style="color: red;">linear_scale</mat-icon> F Function
                <mat-icon style="color: blue;">linear_scale</mat-icon> G Function
                <mat-icon style="color: green;">linear_scale</mat-icon> y = x
            </p>

            <br>
            <p *ngIf="method=='Fixed Point' && show">The root is {{result}}</p>
            <p *ngIf="method=='Fixed Point' && errorFound">Error: {{result}}</p>

            <div *ngIf="method=='Fixed Point' && show">
                <table class="table">
                    <tr>
                        <td>n</td>
                        <td>xn</td>
                        <td>f(xn)</td>
                        <td>Error</td>
                    </tr>
                    <tr *ngFor="let row of table">
                        <td *ngFor="let val of row">{{val}}</td>
                    </tr>
                </table>
            </div>

            <p *ngIf="method=='Newton' && show">The root is {{result}}</p>
            <p *ngIf="method=='Newton' && errorFound">Error: {{result}}</p>

            <div *ngIf="method=='Newton' && show">
                <table class="table">
                    <tr>
                        <td>n</td>
                        <td>x</td>
                        <td>f(x)</td>
                        <td>Error</td>
                    </tr>
                    <tr *ngFor="let row of table">
                        <td *ngFor="let val of row">{{val}}</td>
                    </tr>
                </table>
            </div>

            <p *ngIf="method=='Secant' && show">The root is {{result}}</p>
            <p *ngIf="method=='Secant' && errorFound">Error: {{result}}</p>

            <div *ngIf="method=='Secant' && show">
                <table class="table">
                    <tr>
                        <td>n</td>
                        <td>x</td>
                        <td>f(x)</td>
                        <td>Error</td>
                    </tr>
                    <tr *ngFor="let row of table">
                        <td *ngFor="let val of row">{{val}}</td>
                    </tr>
                </table>
            </div>

            <p *ngIf="method=='Multiple Roots' && show">The root is {{result}}</p>
            <p *ngIf="method=='Multiple Roots' && errorFound">Error: {{result}}</p>

            <div *ngIf="method=='Multiple Roots' && show">
                <table class="table">
                    <tr>
                        <td>n</td>
                        <td>x</td>
                        <td>f(x)</td>
                        <td>Error</td>
                    </tr>
                    <tr *ngFor="let row of table">
                        <td *ngFor="let val of row">{{val}}</td>
                    </tr>
                </table>
            </div>
        </div>

        <div style="float: right;">
            <h3 *ngIf="method!=''" style="text-align: center;">Help</h3>
            <p id=helper *ngIf="method=='Incremental Search'" style="float: right;">
                Incremental search aims to find an
                interval that contains at least one root by iterating
                through the function, starting at an initial value and adding a previously deifned delta
                to it, until there's a sign change between two points a and b evaluated in the function.
            </p>

            <p id=helper *ngIf="method=='Bisection'" style="float: right;">
                Bisection is a closed method that uses an
                interval that contains a root,
                which means there is a change of sign between the limits of the interval
                and the function is continuous on said interval. Then it generates a
                succession of values taken from the middle value found in each iteration of
                the algorithm. It stops when a root is found or the tolerance is reached
                (in this case it means an approximate value was found).
            </p>


            <p id=helper *ngIf="method=='False Position'" style="float: right;">
                False position is a closed method that
                uses an interval containing
                a root and it finds the root’s exact or approximate value by tracing
                a straight line between both extremes of the interval and taking the
                point that cuts the x-axis as the limit for the two generated sub-intervals.
                It then analyzes where the root is and repeats the same process in said
                interval, until the root is found.
            </p>

            <p id=helper *ngIf="method=='Fixed Point'" style="float: right;">
                Fixed point is an open method that aims to
                find the root of a
                function by using an initial value and generating a succession of values
                following xn+1=g(xn), this way it hopes to converge to a certain value
                that stays invariant though the function g. Graphically, this method looks
                for the intersection between g(x) and the line y=x.
            </p>

            <p id=helper *ngIf="method=='Newton'" style="float: right;">
                Newton’s method is a fixed point variation,
                where the function g is calculated as
                xn+1=xn-f(xn)f'(xn), and starts from a given initial value. It then generates a
                succession of values to finally converge to a root. Graphically, Newton’s method
                finds the root through tangents of certain points of the function.
                <br><br>
                This method is extremely fast, even though a good initial value is needed to perform that well.
            </p>

            <p id=helper *ngIf="method=='Secant'" style="float: right;">
                The secant method is a variation of the fixed
                point method, where the
                g function is calculated as xi+1=xi-f(xi)*(xi-xi-1)f(xi)-f(xi-1) and
                starts from two initial values x0 and x1. It then generates a succession
                of values that finally converge to a root. Graphically, the secant method
                finds the root through straight lines between every pair of values in the succession.
                <br><br>
                This method is very fast, but not as fast as Newton’s, and just like the latter,
                it needs good initial values to be effective (they do not have to be an interval
                containing a root though).
            </p>

            <p id=helper *ngIf="method=='Multiple Roots'" style="float: right;">
                The multiple roots method is a variant
                of Newton’s and the fixed
                point methods, where the update rule of the succession is
                xn+1=xn-f(xn)*f'(xn)f'(xn)2 -f(xn)*f''(xn) . It works especially
                well when the derivative of the function tends to zero as it nears
                the root, case in which neither Newton’s nor the fixed point method
                work due to convergence problems.
            </p>

        </div>

    </div>
</div>